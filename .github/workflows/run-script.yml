name: Run Python Script

on:
  workflow_dispatch:  # 允许手动触发
  schedule:
    - cron: '0 0 * * *'  # 每天UTC时间00:00自动运行（可选）

jobs:
  run-script:
    runs-on: ubuntu-latest
    timeout-minutes: 30  # 设置30分钟超时

    steps:
    # 检出代码仓库（更新到最新版本）
    - name: Checkout repository
      uses: actions/checkout@v4

    # 设置Python环境
    - name: Set up Python
      uses: actions/setup-python@v5
      with:
        python-version: '3.10'  # 指定Python版本

    # 安装依赖（根据脚本需要添加）
    - name: Install dependencies
      run: |
        pip install requests beautifulsoup4
        # 添加其他必要的Python包

    # 下载目标脚本
    - name: Download target script
      run: |
        wget https://raw.githubusercontent.com/huaji8/huajiScript/bbd521fe54468c755e3882681baaaad2b24b1/福田e家_Loader.py

    # 运行Python脚本
    - name: Run Python script
      run: python 福田e家_Loader.py

    # 上传运行结果（使用最新版本的Artifact操作）
    - name: Upload output
      if: ${{ always() }}
      uses: actions/upload-artifact@v4
      with:
        name: script-output
        path: |
          output.*  # 替换为实际输出文件
          logs.*
        retention-days: 7  # 设置文件保留天数
